#!/usr/bin/env python
import argparse
import pandas as pd
import sys
from codebooks import htmlbook

parser = argparse.Parser()
parser.add_argumnet("dataset", required=True)
parser.add_argument("--sep", "-s")
parser.add_argument("--output", "-o", default="-")
args = parser.parse()

if args.dataset == "-":
    args.dataset = sys.stdin
    title = "Codebook"
else:
    title = os.path.basename(args.dataset)

read_args = {}
if args.sep:
    read_args["sep"] = args.sep

df = pd.read_csv(args.dataset, **read_args)

if args.output:
    htmlbook(df, title=title, outfile=args.output)
else:
    print(htmlbook(df, title=title))
